I"[¦<h2 id="å‰è¨€">å‰è¨€</h2>

<p>å¹³æ—¶ç»å¸¸ä¼šé‡åˆ°åšç¬¬ä¸‰åˆ†äº«çš„éœ€æ±‚ï¼Œç›¸ä¿¡å¤§å®¶å¥½å¤šéƒ½ä½¿ç”¨çš„é›†æˆçš„åˆ†äº«å¹³å°shareSDKã€å‹ç›Ÿåˆ†äº«ç­‰ã€‚ä»–ä»¬å…¶å®æ˜¯å¯¹å„ç§ç¬¬ä¸‰æ–¹å¹³å°è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œæœ‰æ—¶éœ€æ±‚åªè¦æ±‚åšå…¶ä¸­ä¸€ç§å¹³å°çš„åˆ†äº«çš„æ—¶å€™å…¶å®åƒshareSDKè¿™ç§é›†æˆç¯å¢ƒå°±æœ‰äº›æ˜¾å¾—æ¯”è¾ƒå†—ä½™äº†ï¼Œå› ä¸ºä»–é›†æˆäº†å¾ˆå¤šçš„å¹³å°ï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰ç¨‹åº¦ä¸é«˜ï¼Œä½¿å¾—è‡ªå·±çš„ç¨‹åºä¼šå˜å¾—å¾ˆè‡ƒè‚¿ï¼Œä»Šå¤©å°±æŠŠè‡ªå·±çš„å¹²è´§æ‹¿å‡ºæ¥ï¼Œæ¥è®²ä¸€è®²è‡ªå®šä¹‰çš„ç¬¬ä¸‰æ–¹åˆ†äº«ã€‚
ä¸‹é¢ä¸»è¦è®²ä¸€ä¸‹ç›®å‰åº”ç”¨æ¯”è¾ƒå¹¿çš„ï¼ŒQQã€å¾®ä¿¡ã€å¾®åšçš„åˆ†äº«ã€‚</p>

<h2 id="é›†æˆsdk">é›†æˆSDK</h2>

<p>é¦–å…ˆè¦é›†æˆä½ è¦åšåˆ†äº«å¹³å°çš„SDKï¼Œå’Œç›¸åº”ç¯å¢ƒçš„é…ç½®ï¼Œè¿™äº›é…ç½®åœ¨æˆ‘ä¹‹å‰çš„åšå®¢ä¸­éƒ½æœ‰æ‰€æåŠï¼Œæˆ‘å°±ä¸åœ¨è¿™é‡Œå†æ¬¡å™è¿°äº†</p>

<ul>
  <li>å¾®åšSDKçš„é›†æˆï¼š<a href="http://www.jianshu.com/p/c166d424866e">å¾®åšSDKé›†æˆ</a></li>
  <li>QQ SDKé›†æˆï¼š<a href="http://www.jianshu.com/p/567d39aeac80">QQ SDKé›†æˆ</a></li>
  <li>å¾®ä¿¡SDKé›†æˆï¼š<a href="http://www.jianshu.com/p/92902fecb861">å¾®ä¿¡SDKé›†æˆ</a></li>
</ul>

<p>æ³¨æ„åœ¨é›†æˆSDKåéœ€è¦åœ¨<code class="highlighter-rouge">Appdelegate</code>ä¸­è¿›è¡Œæ³¨å†Œ</p>

<h2 id="å¾®åšçš„åˆ†äº«">å¾®åšçš„åˆ†äº«</h2>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">weiboShareLinkWithUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">description</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span> <span class="nv">andPicUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">picUrl</span>  
<span class="p">{</span>  
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†å¾®åš"</span><span class="p">);</span>  
      
    <span class="kt">AppDelegate</span> <span class="o">*</span><span class="n">myDelegate</span> <span class="o">=</span><span class="p">(</span><span class="kt">AppDelegate</span><span class="o">*</span><span class="p">)[[</span><span class="kt">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">delegate</span><span class="p">];</span>  
      
    <span class="kt">WBAuthorizeRequest</span> <span class="o">*</span><span class="n">authRequest</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBAuthorizeRequest</span> <span class="n">request</span><span class="p">];</span>  
    <span class="n">authRequest</span><span class="o">.</span><span class="n">redirectURI</span> <span class="o">=</span> <span class="s">@"è¿™é‡Œå¡«å†™ä½ ç”³è¯·å¾®åšåº”ç”¨æ—¶çš„å›è°ƒç½‘å€"</span><span class="p">;</span>  
    <span class="n">authRequest</span><span class="o">.</span><span class="n">scope</span> <span class="o">=</span> <span class="s">@"all"</span><span class="p">;</span>  
      
    <span class="kt">WBMessageObject</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBMessageObject</span> <span class="n">message</span><span class="p">];</span>  
      
    <span class="c1">//è®¾ç½®åˆ†äº«çš„æ ‡é¢˜  </span>
    <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>  
      
    <span class="kt">WBWebpageObject</span> <span class="o">*</span><span class="n">webpage</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBWebpageObject</span> <span class="n">object</span><span class="p">];</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">objectID</span> <span class="o">=</span> <span class="s">@"identifier1"</span><span class="p">;</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="p">;</span>  
      
    <span class="c1">//è®¾ç½®åˆ†äº«å‡ºå»æ˜¾ç¤ºçš„å›¾ç‰‡  </span>
    <span class="k">if</span> <span class="p">(</span><span class="n">picUrl</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">picUrl</span> <span class="o">==</span> <span class="kc">nil</span><span class="p">)</span>  
    <span class="p">{</span>  
        <span class="n">webpage</span><span class="o">.</span><span class="n">thumbnailData</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSData</span> <span class="nv">dataWithContentsOfFile</span><span class="p">:[[</span><span class="kt">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nv">pathForResource</span><span class="p">:</span><span class="s">@"icon_share"</span> <span class="nv">ofType</span><span class="p">:</span><span class="s">@"png"</span><span class="p">]];</span>  
    <span class="p">}</span>  
    <span class="k">else</span>  
    <span class="p">{</span>  
        <span class="n">webpage</span><span class="o">.</span><span class="n">thumbnailData</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSData</span> <span class="nv">dataWithContentsOfURL</span><span class="p">:[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">picUrl</span><span class="p">]];</span>  
    <span class="p">}</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">webpageUrl</span> <span class="o">=</span> <span class="n">url</span><span class="p">;</span>  
    <span class="n">message</span><span class="o">.</span><span class="n">mediaObject</span> <span class="o">=</span> <span class="n">webpage</span><span class="p">;</span>  
      
    <span class="kt">WBSendMessageToWeiboRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBSendMessageToWeiboRequest</span> <span class="nv">requestWithMessage</span><span class="p">:</span><span class="n">message</span> <span class="nv">authInfo</span><span class="p">:</span><span class="n">authRequest</span> <span class="nv">access_token</span><span class="p">:</span><span class="n">myDelegate</span><span class="o">.</span><span class="n">wbtoken</span><span class="p">];</span>  
    <span class="n">request</span><span class="o">.</span><span class="n">userInfo</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span><span class="s">@"ShareMessageFrom"</span><span class="p">:</span> <span class="s">@"SendMessageToWeiboViewController"</span><span class="p">,</span>  
                         <span class="s">@"Other_Info_1"</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSNumber</span> <span class="nv">numberWithInt</span><span class="p">:</span><span class="mi">123</span><span class="p">],</span>  
                         <span class="s">@"Other_Info_2"</span><span class="p">:</span> <span class="err">@</span><span class="p">[</span><span class="s">@"obj1"</span><span class="p">,</span> <span class="s">@"obj2"</span><span class="p">],</span>  
                         <span class="s">@"Other_Info_3"</span><span class="p">:</span> <span class="err">@</span><span class="p">{</span><span class="s">@"key1"</span><span class="p">:</span> <span class="s">@"obj1"</span><span class="p">,</span> <span class="s">@"key2"</span><span class="p">:</span> <span class="s">@"obj2"</span><span class="p">}};</span>  
      
    <span class="c1">//è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œåˆ†äº«  </span>
    <span class="p">[</span><span class="kt">WeiboSDK</span> <span class="nv">sendRequest</span><span class="p">:</span><span class="n">request</span><span class="p">];</span>  
<span class="p">}</span>
</code></pre></div></div>

<h2 id="qqçš„åˆ†äº«">QQçš„åˆ†äº«</h2>

<p>QQçš„åˆ†äº«åˆ†ä¸ºåˆ†äº«ç»™QQå¥½å‹å’Œåˆ†äº«åˆ°QQç©ºé—´ï¼Œè¿™é‡Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹æ¥åŒºåˆ†æ˜¯å“ªä¸€ç§åˆ†äº«</p>

<p>åœ¨åˆ†äº«å·¥å…·ç±»çš„å¤´æ–‡ä»¶é‡Œï¼š</p>

<p><code class="highlighter-rouge">JFTools.h</code></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">typedef</span> <span class="nv">enum</span> <span class="p">:</span> <span class="kt">NSUInteger</span> <span class="p">{</span>  
    <span class="kt">QQShare_Friends</span><span class="p">,</span>  
    <span class="kt">QQShare_Qzone</span><span class="p">,</span>  
<span class="p">}</span> <span class="kt">QQShare_Type</span><span class="p">;</span>  
</code></pre></div></div>

<p>ç„¶åå®ç°åˆ†äº«æ–¹æ³•ï¼š</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">qqShareLinkWithScene</span><span class="p">:(</span><span class="kt">QQShare_Type</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span>  
<span class="p">{</span>  
    <span class="kt">NSURL</span> <span class="o">*</span><span class="n">shareUrl</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">url</span><span class="p">];</span>  
      
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†QQ"</span><span class="p">);</span>  
      
    <span class="kt">NSString</span> <span class="o">*</span><span class="n">picUrl</span> <span class="o">=</span> <span class="s">@"è¿™é‡Œå¡«å†™ä½ è¦åˆ†äº«å‡ºå›¾çš„å›¾ç‰‡é“¾æ¥"</span><span class="p">;</span>  
    <span class="kt">NSURL</span> <span class="o">*</span><span class="n">imageUrl</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">picUrl</span><span class="p">];</span>  
   
    <span class="c1">//é€šè¿‡QQAPIObjectæ¥åˆ›å»ºå°†è¦åˆ†äº«çš„å¯¹è±¡     </span>
    <span class="kt">QQApiObject</span> <span class="o">*</span><span class="n">newsObj</span> <span class="o">=</span> <span class="p">[</span><span class="kt">QQApiNewsObject</span> <span class="nv">objectWithURL</span><span class="p">:</span><span class="n">shareUrl</span> <span class="nv">title</span><span class="p">:</span><span class="n">title</span> <span class="nv">description</span><span class="p">:</span><span class="n">description</span> <span class="nv">previewImageURL</span><span class="p">:</span><span class="n">imageUrl</span> <span class="nv">targetContentType</span><span class="p">:</span><span class="kt">QQApiURLTargetTypeNews</span><span class="p">];</span>  
    <span class="c1">//è®¾ç½®åˆ†äº«Reqå¯¹è±¡  </span>
    <span class="kt">SendMessageToQQReq</span> <span class="o">*</span><span class="n">req</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SendMessageToQQReq</span> <span class="nv">reqWithContent</span><span class="p">:</span><span class="n">newsObj</span><span class="p">];</span>  
      
    <span class="k">switch</span> <span class="p">(</span><span class="n">scene</span><span class="p">)</span>  
    <span class="p">{</span>  
            <span class="c1">//åˆ†äº«ç»™QQå¥½å‹  </span>
        <span class="k">case</span> <span class="kt">QQShare_Friends</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">QQApiInterface</span> <span class="nv">sendReq</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
            <span class="c1">//åˆ†äº«ç»™QQç©ºé—´  </span>
        <span class="k">case</span> <span class="kt">QQShare_Qzone</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">QQApiInterface</span> <span class="kt">SendReqToQZone</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">default</span><span class="p">:</span>  
            <span class="k">break</span><span class="p">;</span>  
    <span class="p">}</span>  
<span class="p">}</span>
</code></pre></div></div>

<h2 id="å¾®ä¿¡çš„åˆ†äº«">å¾®ä¿¡çš„åˆ†äº«</h2>

<p>å¾®ä¿¡çš„åˆ†äº«ä¹ŸåŒQQä¸€æ ·ï¼Œæ˜¯åˆ†ä¸ºåˆ†äº«å¾®ä¿¡å¥½å‹å’Œåˆ†äº«å¾®ä¿¡æœ‹å‹åœˆï¼Œè¿™é‡Œåªè¦å¼•å…¥å¾®ä¿¡çš„å¤´æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¾®ä¿¡å®˜æ–¹SDKå·²ç»å£°æ˜äº†æ‰€éœ€è¦ç”¨çš„æšä¸¾äº†ï¼Œæ— éœ€æˆ‘ä»¬å†è¿›è¡Œè®¾ç½®äº†ã€‚</p>

<p>ç”¨ä»¥ä¸‹ä»£ç å®ç°åˆ†äº«ï¼š</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">wechatShareLinkWithScene</span><span class="p">:(</span><span class="n">int</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span>  
<span class="p">{</span>  
    <span class="c1">//å°è£…mediaMessageå¯¹è±¡  </span>
    <span class="kt">WXMediaMessage</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WXMediaMessage</span> <span class="n">message</span><span class="p">];</span>  
      
    <span class="c1">//è®¾ç½®å¾®ä¿¡åˆ†äº«çš„title  </span>
    <span class="p">[</span><span class="n">message</span> <span class="nv">setTitle</span><span class="p">:</span><span class="n">title</span><span class="p">];</span>  
    <span class="c1">//è®¾ç½®åˆ†äº«æè¿°å†…å®¹  </span>
    <span class="p">[</span><span class="n">message</span> <span class="nv">setDescription</span><span class="p">:</span><span class="n">description</span><span class="p">];</span>  
    <span class="c1">//è®¾ç½®åˆ†äº«æ‰€éœ€å›¾ç‰‡  </span>
    <span class="p">[</span><span class="n">message</span> <span class="nv">setThumbImage</span><span class="p">:[</span><span class="kt">UIImage</span> <span class="nv">imageNamed</span><span class="p">:</span><span class="s">@"icon_share"</span><span class="p">]];</span>  
      
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†å¾®ä¿¡"</span><span class="p">);</span>  
      
    <span class="c1">//å°è£…WXWebpageObjectå¯¹è±¡  </span>
    <span class="kt">WXWebpageObject</span> <span class="o">*</span><span class="n">ext</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WXWebpageObject</span> <span class="n">object</span><span class="p">];</span>  
    <span class="n">ext</span><span class="o">.</span><span class="n">webpageUrl</span> <span class="o">=</span> <span class="n">url</span><span class="p">;</span>  
      
    <span class="n">message</span><span class="o">.</span><span class="n">mediaObject</span> <span class="o">=</span> <span class="n">ext</span><span class="p">;</span>  
      
    <span class="c1">//å‘é€è¯·æ±‚  </span>
    <span class="kt">SendMessageToWXReq</span><span class="o">*</span> <span class="n">req</span> <span class="o">=</span> <span class="p">[[</span><span class="kt">SendMessageToWXReq</span> <span class="n">alloc</span><span class="p">]</span> <span class="kd">init</span><span class="p">];</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">bText</span> <span class="o">=</span> <span class="kt">NO</span><span class="p">;</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">;</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span><span class="p">;</span>  
      
    <span class="p">[</span><span class="kt">WXApi</span> <span class="nv">sendReq</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>è¿™æ ·å°±å®ç°äº†ç®€å•çš„åˆ†äº«ï¼Œä¸€èˆ¬çš„éœ€æ±‚å‡ ä¹éƒ½å¯ä»¥æ»¡è¶³ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚</p>

<h2 id="æ€»ç»“ä¸‹">æ€»ç»“ä¸‹</h2>

<p>é¦–å…ˆé›†æˆä½ å‡†å¤‡åˆ†äº«å¹³å°çš„SDKï¼Œç„¶åè¿›è¡ŒAppdelegateçš„æ³¨å†Œï¼Œç„¶åå®ç°åˆ†äº«ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸‹ï¼Œå¾®ä¿¡å’Œå¾®åšåˆ†äº«çš„å›¾ç‰‡æ˜¯ä¼ æœ¬åœ°å›¾ç‰‡ï¼ŒQQæ˜¯è¦ä¼ å›¾ç‰‡çš„é“¾æ¥ï¼Œ(è¿™é‡Œè¦åæ§½ä¸‹ï¼Œä¸ç†è§£ä¼ é“¾æ¥æœ‰ä»€ä¹ˆç”¨)ã€‚</p>

<p>æ—¢ç„¶åˆ†äº«å°±è¦åˆ†äº«çš„å½»åº•ç‚¹ï¼Œä¸‹é¢poå‡ºåšä¸»è‡ªå·±å°è£…çš„åˆ†äº«å·¥å…·ç±»ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„è¿˜è¯·å¤§å®¶å¤šææ„è§ğŸ˜</p>

<p><code class="highlighter-rouge">JFShareTool.h</code></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  </span>
<span class="c1">//  JFShareTool.h  </span>
<span class="c1">//  BobcareDoctorApp  </span>
<span class="c1">//  </span>
<span class="c1">//  Created by wangjifeng on 15/11/13.  </span>
<span class="c1">//  Copyright Â© 2015å¹´ com.01wisdom. All rights reserved.  </span>
<span class="c1">//  </span>
  
<span class="cp">#import &lt;Foundation/Foundation.h&gt;  </span>
  
<span class="n">typedef</span> <span class="nv">enum</span> <span class="p">:</span> <span class="kt">NSUInteger</span> <span class="p">{</span>  
    <span class="kt">QQShare_Friends</span><span class="p">,</span>  
    <span class="kt">QQShare_Qzone</span><span class="p">,</span>  
<span class="p">}</span> <span class="kt">QQShare_Type</span><span class="p">;</span>  
  
<span class="kd">@interface</span> <span class="kt">JFShareTool</span> <span class="p">:</span> <span class="kt">NSObject</span>  
  
<span class="cm">/** 
*  åˆ†äº«é“¾æ¥ç»™å¾®ä¿¡ 
* 
*  @param scene       åœºæ™¯ 
*  @param url         url 
*  @param description æè¿° 
*/</span>  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">wechatShareLinkWithScene</span><span class="p">:(</span><span class="n">int</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span><span class="p">;</span>  
  
<span class="cm">/** 
 *  åˆ†äº«é“¾æ¥ç»™QQ 
 * 
 *  @param scene åœºæ™¯ 
 *  @param url   url 
 *  @param description æè¿° 
 */</span>  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">qqShareLinkWithScene</span><span class="p">:(</span><span class="kt">QQShare_Type</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span><span class="p">;</span>  
  
<span class="cm">/** 
 *  åˆ†äº«é“¾æ¥ç»™å¾®åš 
 * 
 *  @param url         é“¾æ¥ 
 *  @param description æè¿° 
 */</span>  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">weiboShareLinkWithUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">description</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span> <span class="nv">andPicUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">picUrl</span><span class="p">;</span>  
  
<span class="kd">@end</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">JFShareTool.m</code></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  </span>
<span class="c1">//  JFShareTool.m  </span>
<span class="c1">//  BobcareDoctorApp  </span>
<span class="c1">//  </span>
<span class="c1">//  Created by wangjifeng on 15/11/13.  </span>
<span class="c1">//  Copyright Â© 2015å¹´ com.01wisdom. All rights reserved.  </span>
<span class="c1">//  </span>
  
<span class="cp">#import "JFShareTool.h"  </span>
<span class="cp">#import "WXApi.h"  </span>
<span class="cp">#import &lt;UIKit/UIKit.h&gt;  </span>
<span class="cp">#import &lt;TencentOpenAPI/QQApiInterface.h&gt;  </span>
<span class="cp">#import "WeiboSDK.h"  </span>
<span class="cp">#import "AppDelegate.h"  </span>
  
<span class="kd">@implementation</span> <span class="kt">JFShareTool</span>  
  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">wechatShareLinkWithScene</span><span class="p">:(</span><span class="n">int</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span>  
<span class="p">{</span>  
    <span class="c1">//å°è£…mediaMessageå¯¹è±¡  </span>
    <span class="kt">WXMediaMessage</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WXMediaMessage</span> <span class="n">message</span><span class="p">];</span>  
      
    <span class="p">[</span><span class="n">message</span> <span class="nv">setTitle</span><span class="p">:</span><span class="n">title</span><span class="p">];</span>  
    <span class="p">[</span><span class="n">message</span> <span class="nv">setDescription</span><span class="p">:</span><span class="n">description</span><span class="p">];</span>  
    <span class="p">[</span><span class="n">message</span> <span class="nv">setThumbImage</span><span class="p">:[</span><span class="kt">UIImage</span> <span class="nv">imageNamed</span><span class="p">:</span><span class="s">@"icon_share"</span><span class="p">]];</span>  
      
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†å¾®ä¿¡"</span><span class="p">);</span>  
      
    <span class="c1">//å°è£…WXWebpageObjectå¯¹è±¡  </span>
    <span class="kt">WXWebpageObject</span> <span class="o">*</span><span class="n">ext</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WXWebpageObject</span> <span class="n">object</span><span class="p">];</span>  
    <span class="n">ext</span><span class="o">.</span><span class="n">webpageUrl</span> <span class="o">=</span> <span class="n">url</span><span class="p">;</span>  
      
    <span class="n">message</span><span class="o">.</span><span class="n">mediaObject</span> <span class="o">=</span> <span class="n">ext</span><span class="p">;</span>  
      
    <span class="c1">//å‘é€è¯·æ±‚  </span>
    <span class="kt">SendMessageToWXReq</span><span class="o">*</span> <span class="n">req</span> <span class="o">=</span> <span class="p">[[</span><span class="kt">SendMessageToWXReq</span> <span class="n">alloc</span><span class="p">]</span> <span class="kd">init</span><span class="p">];</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">bText</span> <span class="o">=</span> <span class="kt">NO</span><span class="p">;</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="p">;</span>  
    <span class="n">req</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span><span class="p">;</span>  
      
    <span class="p">[</span><span class="kt">WXApi</span> <span class="nv">sendReq</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
<span class="p">}</span>  
  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">qqShareLinkWithScene</span><span class="p">:(</span><span class="kt">QQShare_Type</span><span class="p">)</span><span class="n">scene</span> <span class="nv">url</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">andDescription</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span>  
<span class="p">{</span>  
    <span class="kt">NSURL</span> <span class="o">*</span><span class="n">shareUrl</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">url</span><span class="p">];</span>  
      
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†QQ"</span><span class="p">);</span>  
      
    <span class="kt">NSString</span> <span class="o">*</span><span class="n">picUrl</span> <span class="o">=</span> <span class="s">@"http://file.bmob.cn/M02/B3/F9/oYYBAFZSehaAdoeSAABBZ_Q9h-U696.png"</span><span class="p">;</span>  
    <span class="kt">NSURL</span> <span class="o">*</span><span class="n">imageUrl</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">picUrl</span><span class="p">];</span>  
      
    <span class="kt">QQApiObject</span> <span class="o">*</span><span class="n">newsObj</span> <span class="o">=</span> <span class="p">[</span><span class="kt">QQApiNewsObject</span> <span class="nv">objectWithURL</span><span class="p">:</span><span class="n">shareUrl</span> <span class="nv">title</span><span class="p">:</span><span class="n">title</span> <span class="nv">description</span><span class="p">:</span><span class="n">description</span> <span class="nv">previewImageURL</span><span class="p">:</span><span class="n">imageUrl</span> <span class="nv">targetContentType</span><span class="p">:</span><span class="kt">QQApiURLTargetTypeNews</span><span class="p">];</span>  
    <span class="kt">SendMessageToQQReq</span> <span class="o">*</span><span class="n">req</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SendMessageToQQReq</span> <span class="nv">reqWithContent</span><span class="p">:</span><span class="n">newsObj</span><span class="p">];</span>  
      
    <span class="k">switch</span> <span class="p">(</span><span class="n">scene</span><span class="p">)</span>  
    <span class="p">{</span>  
            <span class="c1">//åˆ†äº«ç»™QQå¥½å‹  </span>
        <span class="k">case</span> <span class="kt">QQShare_Friends</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">QQApiInterface</span> <span class="nv">sendReq</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
            <span class="c1">//åˆ†äº«ç»™QQç©ºé—´  </span>
        <span class="k">case</span> <span class="kt">QQShare_Qzone</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">QQApiInterface</span> <span class="kt">SendReqToQZone</span><span class="p">:</span><span class="n">req</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">default</span><span class="p">:</span>  
            <span class="k">break</span><span class="p">;</span>  
    <span class="p">}</span>  
<span class="p">}</span>  
  
<span class="o">+</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">weiboShareLinkWithUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span> <span class="nv">title</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="nv">description</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">description</span> <span class="nv">andPicUrl</span><span class="p">:(</span><span class="kt">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">picUrl</span>  
<span class="p">{</span>  
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"è°ƒç”¨äº†å¾®åš"</span><span class="p">);</span>  
      
    <span class="kt">AppDelegate</span> <span class="o">*</span><span class="n">myDelegate</span> <span class="o">=</span><span class="p">(</span><span class="kt">AppDelegate</span><span class="o">*</span><span class="p">)[[</span><span class="kt">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">delegate</span><span class="p">];</span>  
      
    <span class="kt">WBAuthorizeRequest</span> <span class="o">*</span><span class="n">authRequest</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBAuthorizeRequest</span> <span class="n">request</span><span class="p">];</span>  
    <span class="n">authRequest</span><span class="o">.</span><span class="n">redirectURI</span> <span class="o">=</span> <span class="s">@"http://www.bobcare.com"</span><span class="p">;</span>  
    <span class="n">authRequest</span><span class="o">.</span><span class="n">scope</span> <span class="o">=</span> <span class="s">@"all"</span><span class="p">;</span>  
      
    <span class="kt">WBMessageObject</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBMessageObject</span> <span class="n">message</span><span class="p">];</span>  
      
    <span class="n">message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>  
      
    <span class="kt">WBWebpageObject</span> <span class="o">*</span><span class="n">webpage</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBWebpageObject</span> <span class="n">object</span><span class="p">];</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">objectID</span> <span class="o">=</span> <span class="s">@"identifier1"</span><span class="p">;</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="p">;</span>  
      
    <span class="k">if</span> <span class="p">(</span><span class="n">picUrl</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">picUrl</span> <span class="o">==</span> <span class="kc">nil</span><span class="p">)</span>  
    <span class="p">{</span>  
        <span class="n">webpage</span><span class="o">.</span><span class="n">thumbnailData</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSData</span> <span class="nv">dataWithContentsOfFile</span><span class="p">:[[</span><span class="kt">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nv">pathForResource</span><span class="p">:</span><span class="s">@"icon_share"</span> <span class="nv">ofType</span><span class="p">:</span><span class="s">@"png"</span><span class="p">]];</span>  
    <span class="p">}</span>  
    <span class="k">else</span>  
    <span class="p">{</span>  
        <span class="n">webpage</span><span class="o">.</span><span class="n">thumbnailData</span> <span class="o">=</span> <span class="p">[</span><span class="kt">NSData</span> <span class="nv">dataWithContentsOfURL</span><span class="p">:[</span><span class="kt">NSURL</span> <span class="kt">URLWithString</span><span class="p">:</span><span class="n">picUrl</span><span class="p">]];</span>  
    <span class="p">}</span>  
    <span class="n">webpage</span><span class="o">.</span><span class="n">webpageUrl</span> <span class="o">=</span> <span class="n">url</span><span class="p">;</span>  
    <span class="n">message</span><span class="o">.</span><span class="n">mediaObject</span> <span class="o">=</span> <span class="n">webpage</span><span class="p">;</span>  
      
    <span class="kt">WBSendMessageToWeiboRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="kt">WBSendMessageToWeiboRequest</span> <span class="nv">requestWithMessage</span><span class="p">:</span><span class="n">message</span> <span class="nv">authInfo</span><span class="p">:</span><span class="n">authRequest</span> <span class="nv">access_token</span><span class="p">:</span><span class="n">myDelegate</span><span class="o">.</span><span class="n">wbtoken</span><span class="p">];</span>  
    <span class="n">request</span><span class="o">.</span><span class="n">userInfo</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span><span class="s">@"ShareMessageFrom"</span><span class="p">:</span> <span class="s">@"SendMessageToWeiboViewController"</span><span class="p">,</span>  
                         <span class="s">@"Other_Info_1"</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSNumber</span> <span class="nv">numberWithInt</span><span class="p">:</span><span class="mi">123</span><span class="p">],</span>  
                         <span class="s">@"Other_Info_2"</span><span class="p">:</span> <span class="err">@</span><span class="p">[</span><span class="s">@"obj1"</span><span class="p">,</span> <span class="s">@"obj2"</span><span class="p">],</span>  
                         <span class="s">@"Other_Info_3"</span><span class="p">:</span> <span class="err">@</span><span class="p">{</span><span class="s">@"key1"</span><span class="p">:</span> <span class="s">@"obj1"</span><span class="p">,</span> <span class="s">@"key2"</span><span class="p">:</span> <span class="s">@"obj2"</span><span class="p">}};</span>  
      
    <span class="p">[</span><span class="kt">WeiboSDK</span> <span class="nv">sendRequest</span><span class="p">:</span><span class="n">request</span><span class="p">];</span>  
<span class="p">}</span>  
  
<span class="kd">@end</span>
</code></pre></div></div>

<p>è°ƒç”¨ç¤ºä¾‹ï¼š</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">-</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span><span class="nv">shareViewButtonClick</span><span class="p">:(</span><span class="kt">CustomShareType</span><span class="p">)</span><span class="n">shareType</span>  
<span class="p">{</span>  
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"%s"</span><span class="p">,</span><span class="n">__func__</span><span class="p">);</span>  
    <span class="kt">NSLog</span><span class="p">(</span><span class="s">@"%lu"</span><span class="p">,(</span><span class="n">unsigned</span> <span class="n">long</span><span class="p">)</span><span class="n">shareType</span><span class="p">);</span>  
      
    <span class="k">switch</span> <span class="p">(</span><span class="n">shareType</span><span class="p">)</span>  
    <span class="p">{</span>  
        <span class="k">case</span> <span class="kt">ShareType_Weixin_Friend</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">JFShareTool</span> <span class="nv">wechatShareLinkWithScene</span><span class="p">:</span><span class="kt">WXSceneSession</span> <span class="nv">url</span><span class="p">:</span><span class="n">url</span> <span class="nv">title</span><span class="p">:</span><span class="n">_shareTitle</span> <span class="nv">andDescription</span><span class="p">:</span><span class="n">_shareContent</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">case</span> <span class="kt">ShareType_Weixin_Circle</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">JFShareTool</span> <span class="nv">wechatShareLinkWithScene</span><span class="p">:</span><span class="kt">WXSceneTimeline</span> <span class="nv">url</span><span class="p">:</span><span class="n">url</span> <span class="nv">title</span><span class="p">:</span><span class="n">_shareTitle</span> <span class="nv">andDescription</span><span class="p">:</span><span class="n">_shareContent</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">case</span> <span class="kt">ShareType_Weibo</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">JFShareTool</span> <span class="nv">weiboShareLinkWithUrl</span><span class="p">:</span><span class="n">url</span> <span class="nv">title</span><span class="p">:</span><span class="n">_shareTitle</span> <span class="nv">description</span><span class="p">:</span><span class="n">_shareContent</span> <span class="nv">andPicUrl</span><span class="p">:</span><span class="kc">nil</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">case</span> <span class="kt">ShareType_QQ_Zone</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">JFShareTool</span> <span class="nv">qqShareLinkWithScene</span><span class="p">:</span><span class="kt">QQShare_Qzone</span> <span class="nv">url</span><span class="p">:</span><span class="n">url</span> <span class="nv">title</span><span class="p">:</span><span class="n">_shareTitle</span> <span class="nv">andDescription</span><span class="p">:</span><span class="n">_shareContent</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">case</span> <span class="kt">ShareType_QQ_Friend</span><span class="p">:</span>  
        <span class="p">{</span>  
            <span class="p">[</span><span class="kt">JFShareTool</span> <span class="nv">qqShareLinkWithScene</span><span class="p">:</span><span class="kt">QQShare_Friends</span> <span class="nv">url</span><span class="p">:</span><span class="n">url</span> <span class="nv">title</span><span class="p">:</span><span class="n">_shareTitle</span> <span class="nv">andDescription</span><span class="p">:</span><span class="n">_shareContent</span><span class="p">];</span>  
            <span class="k">break</span><span class="p">;</span>  
        <span class="p">}</span>  
        <span class="k">default</span><span class="p">:</span>  
            <span class="k">break</span><span class="p">;</span>  
    <span class="p">}</span>  
<span class="p">}</span>
</code></pre></div></div>
:ET